import{a as L,b as s,c as R,d as T,e as W,g as z,h as N,n as D,o as A}from"./chunk-5G5EFX5T.js";import{a as I}from"./chunk-IQWDOJHS.js";import{a as F}from"./chunk-AASM5JO7.js";import"./chunk-LB3TK5W2.js";import{$ as k,A as C,B as c,E as y,I as b,K as P,L as f,N as w,P as _,T as t,U as r,V as u,W as x,X as h,Y as d,Z as M,_ as O,aa as a,ba as E,pa as S,q as v,s as p,t as g,xa as V}from"./chunk-NXQ7BON5.js";var q=["welcomeVideo"];function G(l,n){if(l&1&&(t(0,"div",17),a(1),r()),l&2){let e=d();c(),E(e.error)}}function j(l,n){l&1&&(t(0,"span",23),a(1,"At least 2 characters"),r())}function B(l,n){l&1&&(t(0,"span",23),a(1,"Valid email required"),r())}function Q(l,n){l&1&&(t(0,"span",23),a(1,"At least 6 characters"),r())}function H(l,n){if(l&1){let e=x();t(0,"form",19),h("ngSubmit",function(){p(e);let i=d();return g(i.onRegister())}),t(1,"h2",20),a(2,"Create account"),r(),t(3,"label",21),a(4,"Username"),r(),u(5,"input",22),b(6,j,2,0,"span",23),t(7,"label",21),a(8,"Email"),r(),u(9,"input",24),b(10,B,2,0,"span",23),t(11,"label",21),a(12,"Password"),r(),u(13,"input",25),b(14,Q,2,0,"span",23),t(15,"button",26),a(16,"Register"),r(),t(17,"button",27),h("click",function(){p(e);let i=d();return g(i.toggleMode())}),a(18,"Already have an account? Log in"),r()()}if(l&2){let e,o,i,m=d();f("formGroup",m.registerForm),c(6),_((e=m.registerForm.get("username"))!=null&&e.invalid&&((e=m.registerForm.get("username"))!=null&&e.touched)?6:-1),c(4),_((o=m.registerForm.get("email"))!=null&&o.invalid&&((o=m.registerForm.get("email"))!=null&&o.touched)?10:-1),c(4),_((i=m.registerForm.get("password"))!=null&&i.invalid&&((i=m.registerForm.get("password"))!=null&&i.touched)?14:-1),c(),f("disabled",m.loading)}}function X(l,n){if(l&1){let e=x();t(0,"form",19),h("ngSubmit",function(){p(e);let i=d();return g(i.onLogin())}),t(1,"h2",20),a(2,"Log in"),r(),t(3,"label",21),a(4,"Username or email"),r(),u(5,"input",28),t(6,"label",21),a(7,"Password"),r(),u(8,"input",29),t(9,"button",26),a(10,"Log in"),r(),t(11,"button",27),h("click",function(){p(e);let i=d();return g(i.toggleMode())}),a(12,"Need an account? Register"),r()()}if(l&2){let e=d();f("formGroup",e.loginForm),c(9),f("disabled",e.loading)}}var K="https://videos.pexels.com/video-files/6962711/6962711-hd_1920_1080_25fps.mp4",Y="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4",J="https://www.pexels.com/video/6962711/",U=class l{videoRef;fb=new D;auth=v(F);router=v(V);themeService=v(I);pexelsVideoCreditUrl=J;showRegister=!1;error=null;ngAfterViewInit(){setTimeout(()=>this.startVideo(),0)}startVideo(){let n=this.videoRef?.nativeElement;if(!n)return;let e=()=>n.play().catch(()=>{}),o=()=>{n.src=Y,n.load()},i=()=>{n.src=K,n.load()};n.muted=!0,n.playsInline=!0,n.loop=!0,n.preload="auto",n.addEventListener("canplay",e,{once:!0});let m=()=>{n.removeEventListener("canplay",e),i(),n.addEventListener("canplay",e,{once:!0})};n.addEventListener("error",m,{once:!0}),o()}loading=!1;loginForm=this.fb.nonNullable.group({login:["",s.required],password:["",s.required]});registerForm=this.fb.nonNullable.group({username:["",[s.required,s.minLength(2)]],email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]]});toggleMode(){this.showRegister=!this.showRegister,this.error=null}onLogin(){if(this.error=null,this.loginForm.invalid)return;this.loading=!0;let{login:n,password:e}=this.loginForm.getRawValue();this.auth.login(n,e).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/home"])},error:o=>{this.loading=!1,this.error=o.error?.error||"Login failed"}})}onRegister(){if(this.error=null,this.registerForm.invalid)return;this.loading=!0;let{username:n,email:e,password:o}=this.registerForm.getRawValue();this.auth.register(n,e,o).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/home"])},error:i=>{this.loading=!1,this.error=i.error?.error||"Registration failed"}})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=y({type:l,selectors:[["app-welcome"]],viewQuery:function(e,o){if(e&1&&M(q,5),e&2){let i;O(i=k())&&(o.videoRef=i.first)}},decls:27,vars:8,consts:[["welcomeVideo",""],[1,"welcome-page"],["aria-hidden","true",1,"welcome-video-section"],["muted","","loop","","playsinline","","preload","auto","autoplay","",1,"welcome-video"],[1,"welcome-video-overlay"],[1,"welcome-hero-container"],[1,"welcome-hero-card"],[1,"app-name"],[1,"app-tagline"],[1,"app-blurb"],[1,"welcome-video-credit"],["target","_blank","rel","noopener noreferrer",3,"href"],["role","group","aria-label","Theme",1,"welcome-theme-toggle"],["type","button","aria-pressed","!themeService.isDark()","aria-label","Light mode",1,"theme-option",3,"click"],["aria-hidden","true"],["type","button","aria-label","Dark mode",1,"theme-option",3,"click"],[1,"welcome-content"],["role","alert",1,"error-banner"],[1,"auth-form",3,"formGroup"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"label"],["type","text","formControlName","username","placeholder","Username","autocomplete","username",1,"input"],[1,"hint"],["type","email","formControlName","email","placeholder","Email","autocomplete","email",1,"input"],["type","password","formControlName","password","placeholder","Password (min 6 characters)","autocomplete","new-password",1,"input"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-link",3,"click"],["type","text","formControlName","login","placeholder","Username or email","autocomplete","username",1,"input"],["type","password","formControlName","password","placeholder","Password","autocomplete","current-password",1,"input"]],template:function(e,o){if(e&1){let i=x();t(0,"div",1)(1,"section",2),u(2,"video",3,0)(4,"div",4),t(5,"div",5)(6,"div",6)(7,"h1",7),a(8,"Home Pilot"),r(),t(9,"p",8),a(10,"Your smart home, one place."),r(),t(11,"p",9),a(12," Control heating, hot water, lights and see insights\u2014all from your phone. Create an account to get started and keep your settings saved across devices. "),r(),t(13,"p",10)(14,"a",11),a(15,"Video from Pexels"),r()()()()(),t(16,"div",12)(17,"button",13),h("click",function(){return p(i),g(o.themeService.setTheme("light"))}),t(18,"span",14),a(19,"\u2600"),r()(),t(20,"button",15),h("click",function(){return p(i),g(o.themeService.setTheme("dark"))}),t(21,"span",14),a(22,"\u263D"),r()()(),t(23,"div",16),b(24,G,2,1,"div",17)(25,H,19,5,"form",18)(26,X,13,2,"form",18),r()()}e&2&&(c(14),f("href",o.pexelsVideoCreditUrl,C),c(3),w("active",!o.themeService.isDark()),c(3),w("active",o.themeService.isDark()),P("aria-pressed",o.themeService.isDark()),c(4),_(o.error?24:-1),c(),_(o.showRegister?25:26))},dependencies:[S,A,W,L,R,T,z,N],styles:[".welcome-page[_ngcontent-%COMP%]{min-height:100vh;position:relative;display:flex;flex-direction:column}.welcome-video-section[_ngcontent-%COMP%]{position:relative;width:100%;min-height:clamp(280px,50vh,420px);overflow:hidden;flex-shrink:0}.welcome-video[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}.welcome-video-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to bottom,#00000059,#00000080,#000000bf);pointer-events:none}.welcome-hero-container[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:1.5rem;pointer-events:none}.welcome-hero-card[_ngcontent-%COMP%]{max-width:420px;padding:1.75rem 2rem;border-radius:16px;text-align:center;pointer-events:auto;background:#fff3;border:1px solid var(--border);box-shadow:var(--shadow);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}html.theme-dark[_nghost-%COMP%]   .welcome-hero-card[_ngcontent-%COMP%], html.theme-dark   [_nghost-%COMP%]   .welcome-hero-card[_ngcontent-%COMP%]{background:#1e293b33;border:1px solid var(--border);box-shadow:var(--shadow)}.welcome-hero-card[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-primary);margin:0 0 .25rem;letter-spacing:-.02em}.welcome-hero-card[_ngcontent-%COMP%]   .app-tagline[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:0 0 1rem}.welcome-hero-card[_ngcontent-%COMP%]   .app-blurb[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);line-height:1.5;margin:0}.welcome-video-credit[_ngcontent-%COMP%]{margin:1rem 0 0;font-size:.75rem;color:var(--text-secondary);opacity:.9}.welcome-video-credit[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-secondary);text-decoration:underline}.welcome-video-credit[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.welcome-theme-toggle[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:2;display:flex;gap:.25rem;padding:.25rem;background:#ffffffe6;border-radius:12px;box-shadow:0 2px 12px #00000026}html.theme-dark[_ngcontent-%COMP%]   .welcome-theme-toggle[_ngcontent-%COMP%]{background:#1e293bf2;box-shadow:0 2px 12px #0000004d}.welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:none;border-radius:8px;background:transparent;color:var(--text-secondary);cursor:pointer;font-size:1.25rem;display:flex;align-items:center;justify-content:center;transition:background .2s ease,color .2s ease}.welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]:hover{background:#0000000f;color:var(--text-primary)}html.theme-dark[_ngcontent-%COMP%]   .welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]:hover{background:#ffffff14}.welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option.active[_ngcontent-%COMP%]{background:var(--accent-blue-soft);color:var(--accent-blue)}.welcome-content[_ngcontent-%COMP%]{position:relative;z-index:1;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:1.5rem 1.25rem 2rem;min-height:0;box-sizing:border-box}.welcome-content[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-bottom:1rem}.welcome-content[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]{width:100%;max-width:400px}.error-banner[_ngcontent-%COMP%]{background:var(--error-bg);color:var(--error-red);padding:.75rem 1rem;border-radius:12px;font-size:.9rem}.auth-form[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);padding:1.5rem}.form-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-primary);margin:0 0 1rem}.label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:500;color:var(--text-primary);margin-bottom:.25rem}.input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:.5rem;border:1px solid var(--border);border-radius:10px;font-size:1rem;background:var(--bg-content);color:var(--text-primary);box-sizing:border-box}.input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.hint[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:var(--error-red);margin-bottom:.5rem}.btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%]{background:var(--accent-blue);color:#fff;margin-top:1rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]{background:transparent;color:var(--accent-blue);font-weight:500;margin-top:.75rem}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{U as WelcomeComponent};
