import{a as X}from"./chunk-6JDY6GEQ.js";import{a as Z}from"./chunk-3DUJNAKV.js";import{a as d}from"./chunk-66TX2GSC.js";import{b as W}from"./chunk-FKSBLCNH.js";import{B as p,E as w,I as _,K as E,L,N as b,O as T,P as A,T as n,U as a,V as m,W as z,X as M,Y as g,Z as s,_ as v,ca as D,da as I,f as y,fa as H,ga as G,i as P,j as O,ka as R,na as V,pa as F,q as c,qa as j,ra as U,s as x,t as S,ta as $,u as h,ua as C,v as u,va as B,wa as N,xa as q}from"./chunk-UDG4TZWI.js";var o=()=>{let e=c(d),i=c(C);return e.isLoggedIn()?!0:i.createUrlTree(["/welcome"])};var J=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"welcome",loadComponent:()=>import("./chunk-PVIPDJN2.js").then(e=>e.WelcomeComponent)},{path:"home",canActivate:[o],loadComponent:()=>import("./chunk-VYFI6GYD.js").then(e=>e.DashboardComponent)},{path:"insights",canActivate:[o],loadComponent:()=>import("./chunk-HAYUHM5C.js").then(e=>e.InsightsComponent)},{path:"text-size",canActivate:[o],loadComponent:()=>import("./chunk-GS4OCAL3.js").then(e=>e.TextSizeComponent)},{path:"discover",canActivate:[o],loadComponent:()=>import("./chunk-5NLN4DUW.js").then(e=>e.DiscoverComponent)},{path:"manage",canActivate:[o],loadComponent:()=>import("./chunk-XGAMOOAI.js").then(e=>e.ManageComponent)},{path:"ask-ai",canActivate:[o],loadComponent:()=>import("./chunk-TP2X2BWM.js").then(e=>e.AskAiComponent)},{path:"guide",canActivate:[o],loadComponent:()=>import("./chunk-D4ME7XWF.js").then(e=>e.GuideComponent)},{path:"connect-to-alexa",canActivate:[o],loadComponent:()=>import("./chunk-S6R4PU5K.js").then(e=>e.ConnectToAlexaComponent)},{path:"home-profile",canActivate:[o],loadComponent:()=>import("./chunk-GEY4Y57I.js").then(e=>e.HomeProfileComponent)},{path:"people-and-permissions",canActivate:[o],loadComponent:()=>import("./chunk-MJIDC43H.js").then(e=>e.PeopleAndPermissionsComponent)},{path:"energy-tariffs",canActivate:[o],loadComponent:()=>import("./chunk-DGUXVC7X.js").then(e=>e.EnergyTariffsComponent)},{path:"faq",canActivate:[o],loadComponent:()=>import("./chunk-XRL7E4KE.js").then(e=>e.FaqComponent)},{path:"about",canActivate:[o],loadComponent:()=>import("./chunk-ET36TWHH.js").then(e=>e.AboutComponent)},{path:"my-devices",canActivate:[o],loadComponent:()=>import("./chunk-DK6X72R2.js").then(e=>e.UnderConstructionComponent),data:{title:"My devices"}},{path:"groups",canActivate:[o],loadComponent:()=>import("./chunk-DK6X72R2.js").then(e=>e.UnderConstructionComponent),data:{title:"Groups"}},{path:"actions",canActivate:[o],loadComponent:()=>import("./chunk-DK6X72R2.js").then(e=>e.UnderConstructionComponent),data:{title:"Actions"}},{path:"personal-details",canActivate:[o],loadComponent:()=>import("./chunk-IW7G2WJB.js").then(e=>e.PersonalDetailsComponent)},{path:"orders-returns",canActivate:[o],loadComponent:()=>import("./chunk-GDUT64TR.js").then(e=>e.OrdersReturnsComponent)},{path:"account-security",canActivate:[o],loadComponent:()=>import("./chunk-YVC5LDMK.js").then(e=>e.AccountSecurityComponent)},{path:"product-guides",canActivate:[o],loadComponent:()=>import("./chunk-DCRZXFHA.js").then(e=>e.ProductGuidesComponent)}];var K=(e,i)=>{let t=c(d),r=t.getToken();return r&&(e=e.clone({setHeaders:{Authorization:`Bearer ${r}`}})),i(e).pipe(O(l=>{let k=l?.status??0,ee=k===0,te=k===401;return t.getToken()&&(ee||te)&&t.logout(),y(()=>l)}))};var Q={providers:[G({eventCoalescing:!0}),F(j([K])),q(J)]};var ne=()=>({exact:!0});function oe(e,i){if(e&1){let t=z();n(0,"header",1)(1,"div",3)(2,"span",4),s(3),I(4,"date"),a(),n(5,"div",5)(6,"button",6),M("click",function(){x(t);let l=g();return S(l.themeService.setTheme("light"))}),n(7,"span",7),s(8,"\u2600"),a()(),n(9,"button",8),M("click",function(){x(t);let l=g();return S(l.themeService.setTheme("dark"))}),n(10,"span",9),s(11,"\u263D"),a()()(),n(12,"div",10),m(13,"span",11),n(14,"span"),s(15),a()()(),n(16,"div",12)(17,"h1",13),s(18),a()()()}if(e&2){let t=g();p(3),v(H(4,10,t.now(),"HH:mm")),p(3),b("active",!t.themeService.isDark()),p(3),b("active",t.themeService.isDark()),E("aria-pressed",t.themeService.isDark()),p(3),T("connection-"+t.connectionStatus),p(3),v(t.connectionLabel()),p(3),v(t.greeting)}}function ie(e,i){e&1&&(n(0,"nav",2)(1,"a",14)(2,"span",15),h(),n(3,"svg",16),m(4,"line",17)(5,"line",18)(6,"line",19),a()(),u(),n(7,"span",20),s(8,"Home"),a()(),n(9,"a",21)(10,"span",15),h(),n(11,"svg",16),m(12,"line",22)(13,"line",23)(14,"line",24),a()(),u(),n(15,"span",20),s(16,"Insights"),a()(),n(17,"a",25)(18,"span",15),h(),n(19,"svg",16),m(20,"circle",26)(21,"polygon",27),a()(),u(),n(22,"span",20),s(23,"Discover"),a()(),n(24,"a",28)(25,"span",15),h(),n(26,"svg",16),m(27,"circle",29)(28,"path",30),a()(),u(),n(29,"span",20),s(30,"Manage"),a()()()),e&2&&(p(),L("routerLinkActiveOptions",D(1,ne)))}var f=class e{themeService=c(X);textSizeService=c(Z);deviceApi=c(W);router=c(C);auth=c(d);connectionStatus="disconnected";greeting="";showShell=!0;ngOnInit(){this.themeService.init(),this.textSizeService.init(),this.setGreeting(),this.deviceApi.connectionStatus$.subscribe(i=>this.connectionStatus=i),this.auth.isLoggedIn()&&this.deviceApi.connectWebSocket(),this.showShell=!this.router.url.includes("/welcome"),this.router.events.pipe(P(i=>i instanceof U)).subscribe(i=>{this.showShell=!i.urlAfterRedirects.includes("welcome"),this.showShell&&(this.setGreeting(),this.textSizeService.reloadForCurrentUser())})}now(){return new Date}connectionLabel(){switch(this.connectionStatus){case"connected":return"Connected";case"connecting":return"Connecting\u2026";case"poor":return"Poor connection";default:return"Disconnected"}}setGreeting(){let i=new Date().getHours(),t=this.auth.getUsername(),r=t?` ${t}`:"";i<12?this.greeting=`Good Morning${r}`:i<17?this.greeting=`Good Afternoon${r}`:this.greeting=`Good Evening${r}`}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-root"]],decls:4,vars:2,consts:[[1,"app-shell"],[1,"app-header"],["aria-label","Main navigation",1,"bottom-nav"],[1,"header-top"],[1,"time"],["role","group","aria-label","Theme",1,"theme-dial"],["type","button","aria-pressed","!(themeService.isDark())","aria-label","Light mode",1,"theme-option",3,"click"],["aria-hidden","true",1,"theme-icon"],["type","button","aria-label","Dark mode",1,"theme-option",3,"click"],["aria-hidden","true",1,"theme-icon","theme-icon-moon"],[1,"connection"],[1,"connection-dot"],[1,"header-main"],[1,"greeting"],["routerLink","/home","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],["aria-hidden","true",1,"nav-icon"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","18","x2","21","y2","18"],[1,"nav-label"],["routerLink","/insights","routerLinkActive","active",1,"nav-item"],["x1","18","y1","20","x2","18","y2","10"],["x1","12","y1","20","x2","12","y2","4"],["x1","6","y1","20","x2","6","y2","14"],["routerLink","/discover","routerLinkActive","active",1,"nav-item"],["cx","12","cy","12","r","10"],["points","16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"],["routerLink","/manage","routerLinkActive","active",1,"nav-item"],["cx","12","cy","12","r","3"],["d","M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"]],template:function(t,r){t&1&&(n(0,"div",0),_(1,oe,19,13,"header",1),m(2,"router-outlet"),_(3,ie,31,2,"nav",2),a()),t&2&&(p(),A(r.showShell?1:-1),p(2),A(r.showShell?3:-1))},dependencies:[$,B,N,R],styles:[".app-shell[_ngcontent-%COMP%]{min-height:100vh;max-width:480px;margin:0 auto;background:var(--bg-content);font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;display:flex;flex-direction:column;padding-bottom:env(safe-area-inset-bottom,0);transition:background-color .2s ease}.app-header[_ngcontent-%COMP%]{background:var(--header-bg);color:var(--header-text);padding:1rem 1.25rem 1.25rem;padding-top:max(1rem,env(safe-area-inset-top));transition:background-color .2s ease,color .2s ease;flex-shrink:0}.app-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:.5rem;margin-bottom:.5rem}.app-header[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.9rem;opacity:.9}.app-header[_ngcontent-%COMP%]   .theme-dial[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff26;border-radius:999px;padding:.25rem;gap:0}.app-header[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]{width:36px;height:36px;border:none;border-radius:50%;background:transparent;color:var(--header-text);opacity:.7;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s ease,opacity .2s ease}.app-header[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]:hover{opacity:1}.app-header[_ngcontent-%COMP%]   .theme-option.active[_ngcontent-%COMP%]{background:#fffffff2;color:var(--header-bg);opacity:1}.app-header[_ngcontent-%COMP%]   .theme-icon[_ngcontent-%COMP%]{font-size:1.15rem;line-height:1}.app-header[_ngcontent-%COMP%]   .theme-icon-moon[_ngcontent-%COMP%]{display:inline-block;transform:scaleX(-1)}.app-header[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;font-size:.8rem;opacity:.95;flex-shrink:0}.app-header[_ngcontent-%COMP%]   .connection-dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:var(--status-ok)}.app-header[_ngcontent-%COMP%]   .connection-connecting[_ngcontent-%COMP%]   .connection-dot[_ngcontent-%COMP%]{background:var(--status-connecting);animation:_ngcontent-%COMP%_header-pulse 1s ease-in-out infinite}.app-header[_ngcontent-%COMP%]   .connection-disconnected[_ngcontent-%COMP%]   .connection-dot[_ngcontent-%COMP%], .app-header[_ngcontent-%COMP%]   .connection-poor[_ngcontent-%COMP%]   .connection-dot[_ngcontent-%COMP%]{background:var(--status-poor)}@keyframes _ngcontent-%COMP%_header-pulse{50%{opacity:.5}}.app-header[_ngcontent-%COMP%]   .greeting[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin:0;letter-spacing:-.02em}.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:50%;transform:translate(-50%);width:100%;max-width:480px;background:var(--nav-bg);color:var(--nav-text);display:flex;justify-content:space-around;align-items:center;padding:.5rem 0 max(.5rem,env(safe-area-inset-bottom));box-shadow:0 -1px 4px #00000026;transition:background-color .2s ease,color .2s ease;z-index:1000}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.2rem;padding:.5rem;color:var(--nav-text);text-decoration:none;font-size:.7rem;flex:1;min-width:0}.nav-item[_ngcontent-%COMP%]:hover{color:var(--nav-active)}.nav-item.active[_ngcontent-%COMP%]{color:var(--nav-active);font-weight:500}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center}.nav-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}"]})};var ae=typeof localStorage<"u"?localStorage.getItem("mqtt-dashboard-theme"):null,re=ae==="dark"?"theme-dark":"theme-light";document.documentElement.classList.add(re);var Y=typeof localStorage<"u"&&localStorage.getItem("mqtt-dashboard-text-size")||"medium",ce=["small","medium","large"].includes(Y)?`text-size-${Y}`:"text-size-medium";document.documentElement.classList.add(ce);V(f,Q).catch(e=>console.error(e));
