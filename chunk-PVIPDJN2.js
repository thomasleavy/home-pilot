import{a as E,b as c,c as F,d as V,e as T,g as W,h as z,n as N,o as R}from"./chunk-LJ3XI4RV.js";import{a as D}from"./chunk-6JDY6GEQ.js";import{a as S}from"./chunk-66TX2GSC.js";import"./chunk-FKSBLCNH.js";import{A as w,B as l,E as y,I as f,K as P,L as u,N as x,P as h,T as e,U as n,V as d,W as C,X as g,Y as p,Z as r,_ as M,ma as O,q as v,s as _,t as b,ua as k}from"./chunk-UDG4TZWI.js";function U(i,m){if(i&1&&(e(0,"div",16),r(1),n()),i&2){let t=p();l(),M(t.error)}}function q(i,m){i&1&&(e(0,"span",22),r(1,"At least 2 characters"),n())}function A(i,m){i&1&&(e(0,"span",22),r(1,"Valid email required"),n())}function G(i,m){i&1&&(e(0,"span",22),r(1,"At least 6 characters"),n())}function j(i,m){if(i&1){let t=C();e(0,"form",18),g("ngSubmit",function(){_(t);let a=p();return b(a.onRegister())}),e(1,"h2",19),r(2,"Create account"),n(),e(3,"label",20),r(4,"Username"),n(),d(5,"input",21),f(6,q,2,0,"span",22),e(7,"label",20),r(8,"Email"),n(),d(9,"input",23),f(10,A,2,0,"span",22),e(11,"label",20),r(12,"Password"),n(),d(13,"input",24),f(14,G,2,0,"span",22),e(15,"button",25),r(16,"Register"),n(),e(17,"button",26),g("click",function(){_(t);let a=p();return b(a.toggleMode())}),r(18,"Already have an account? Log in"),n()()}if(i&2){let t,o,a,s=p();u("formGroup",s.registerForm),l(6),h((t=s.registerForm.get("username"))!=null&&t.invalid&&((t=s.registerForm.get("username"))!=null&&t.touched)?6:-1),l(4),h((o=s.registerForm.get("email"))!=null&&o.invalid&&((o=s.registerForm.get("email"))!=null&&o.touched)?10:-1),l(4),h((a=s.registerForm.get("password"))!=null&&a.invalid&&((a=s.registerForm.get("password"))!=null&&a.touched)?14:-1),l(),u("disabled",s.loading)}}function B(i,m){if(i&1){let t=C();e(0,"form",18),g("ngSubmit",function(){_(t);let a=p();return b(a.onLogin())}),e(1,"h2",19),r(2,"Log in"),n(),e(3,"label",20),r(4,"Username or email"),n(),d(5,"input",27),e(6,"label",20),r(7,"Password"),n(),d(8,"input",28),e(9,"button",25),r(10,"Log in"),n(),e(11,"button",26),g("click",function(){_(t);let a=p();return b(a.toggleMode())}),r(12,"Need an account? Register"),n()()}if(i&2){let t=p();u("formGroup",t.loginForm),l(9),u("disabled",t.loading)}}var I="https://videos.pexels.com/video-files/6962711/6962711-hd_1920_1080_25fps.mp4",L=class i{fb=new N;auth=v(S);router=v(k);themeService=v(D);welcomeVideoBackupUrl=I;showRegister=!1;error=null;loading=!1;loginForm=this.fb.nonNullable.group({login:["",c.required],password:["",c.required]});registerForm=this.fb.nonNullable.group({username:["",[c.required,c.minLength(2)]],email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]});toggleMode(){this.showRegister=!this.showRegister,this.error=null}onLogin(){if(this.error=null,this.loginForm.invalid)return;this.loading=!0;let{login:m,password:t}=this.loginForm.getRawValue();this.auth.login(m,t).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/home"])},error:o=>{this.loading=!1,this.error=o.error?.error||"Login failed"}})}onRegister(){if(this.error=null,this.registerForm.invalid)return;this.loading=!0;let{username:m,email:t,password:o}=this.registerForm.getRawValue();this.auth.register(m,t,o).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/home"])},error:a=>{this.loading=!1,this.error=a.error?.error||"Registration failed"}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-welcome"]],decls:25,vars:8,consts:[[1,"welcome-page"],["aria-hidden","true",1,"welcome-video-section"],["autoplay","","muted","","loop","","playsinline","",1,"welcome-video"],["src","/videos/welcome-bg.mp4","type","video/mp4"],["type","video/mp4",3,"src"],[1,"welcome-video-overlay"],[1,"welcome-hero-container"],[1,"welcome-hero-card"],[1,"app-name"],[1,"app-tagline"],[1,"app-blurb"],["role","group","aria-label","Theme",1,"welcome-theme-toggle"],["type","button","aria-pressed","!themeService.isDark()","aria-label","Light mode",1,"theme-option",3,"click"],["aria-hidden","true"],["type","button","aria-label","Dark mode",1,"theme-option",3,"click"],[1,"welcome-content"],["role","alert",1,"error-banner"],[1,"auth-form",3,"formGroup"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-title"],[1,"label"],["type","text","formControlName","username","placeholder","Username","autocomplete","username",1,"input"],[1,"hint"],["type","email","formControlName","email","placeholder","Email","autocomplete","email",1,"input"],["type","password","formControlName","password","placeholder","Password (min 6 characters)","autocomplete","new-password",1,"input"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-link",3,"click"],["type","text","formControlName","login","placeholder","Username or email","autocomplete","username",1,"input"],["type","password","formControlName","password","placeholder","Password","autocomplete","current-password",1,"input"]],template:function(t,o){t&1&&(e(0,"div",0)(1,"section",1)(2,"video",2),d(3,"source",3)(4,"source",4),n(),d(5,"div",5),e(6,"div",6)(7,"div",7)(8,"h1",8),r(9,"Home Pilot"),n(),e(10,"p",9),r(11,"Your smart home, one place."),n(),e(12,"p",10),r(13," Control heating, hot water, lights and see insights\u2014all from your phone. Create an account to get started and keep your settings saved across devices. "),n()()()(),e(14,"div",11)(15,"button",12),g("click",function(){return o.themeService.setTheme("light")}),e(16,"span",13),r(17,"\u2600"),n()(),e(18,"button",14),g("click",function(){return o.themeService.setTheme("dark")}),e(19,"span",13),r(20,"\u263D"),n()()(),e(21,"div",15),f(22,U,2,1,"div",16)(23,j,19,5,"form",17)(24,B,13,2,"form",17),n()()),t&2&&(l(4),u("src",o.welcomeVideoBackupUrl,w),l(11),x("active",!o.themeService.isDark()),l(3),x("active",o.themeService.isDark()),P("aria-pressed",o.themeService.isDark()),l(4),h(o.error?22:-1),l(),h(o.showRegister?23:24))},dependencies:[O,R,T,E,F,V,W,z],styles:[".welcome-page[_ngcontent-%COMP%]{min-height:100vh;position:relative;display:flex;flex-direction:column}.welcome-video-section[_ngcontent-%COMP%]{position:relative;width:100%;min-height:clamp(280px,50vh,420px);overflow:hidden;flex-shrink:0}.welcome-video[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}.welcome-video-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to bottom,#00000059,#00000080,#000000bf);pointer-events:none}.welcome-hero-container[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;padding:1.5rem;pointer-events:none}.welcome-hero-card[_ngcontent-%COMP%]{max-width:420px;padding:1.75rem 2rem;border-radius:16px;text-align:center;pointer-events:auto;background:var(--bg-card);border:1px solid var(--border);box-shadow:var(--shadow)}.welcome-hero-card[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-primary);margin:0 0 .25rem;letter-spacing:-.02em}.welcome-hero-card[_ngcontent-%COMP%]   .app-tagline[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin:0 0 1rem}.welcome-hero-card[_ngcontent-%COMP%]   .app-blurb[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);line-height:1.5;margin:0}.welcome-theme-toggle[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:2;display:flex;gap:.25rem;padding:.25rem;background:#ffffffe6;border-radius:12px;box-shadow:0 2px 12px #00000026}html.theme-dark[_ngcontent-%COMP%]   .welcome-theme-toggle[_ngcontent-%COMP%]{background:#1e293bf2;box-shadow:0 2px 12px #0000004d}.welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:none;border-radius:8px;background:transparent;color:var(--text-secondary);cursor:pointer;font-size:1.25rem;display:flex;align-items:center;justify-content:center;transition:background .2s ease,color .2s ease}.welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]:hover{background:#0000000f;color:var(--text-primary)}html.theme-dark[_ngcontent-%COMP%]   .welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option[_ngcontent-%COMP%]:hover{background:#ffffff14}.welcome-theme-toggle[_ngcontent-%COMP%]   .theme-option.active[_ngcontent-%COMP%]{background:var(--accent-blue-soft);color:var(--accent-blue)}.welcome-content[_ngcontent-%COMP%]{position:relative;z-index:1;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:1.5rem 1.25rem 2rem;min-height:0;box-sizing:border-box}.welcome-content[_ngcontent-%COMP%]   .error-banner[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-bottom:1rem}.welcome-content[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]{width:100%;max-width:400px}.error-banner[_ngcontent-%COMP%]{background:var(--error-bg);color:var(--error-red);padding:.75rem 1rem;border-radius:12px;font-size:.9rem}.auth-form[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);padding:1.5rem}.form-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-primary);margin:0 0 1rem}.label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:500;color:var(--text-primary);margin-bottom:.25rem}.input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:.5rem;border:1px solid var(--border);border-radius:10px;font-size:1rem;background:var(--bg-content);color:var(--text-primary);box-sizing:border-box}.input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.hint[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:var(--error-red);margin-bottom:.5rem}.btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%]{background:var(--accent-blue);color:#fff;margin-top:1rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]{background:transparent;color:var(--accent-blue);font-weight:500;margin-top:.75rem}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{L as WelcomeComponent};
