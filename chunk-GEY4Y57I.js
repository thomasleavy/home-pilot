import{a as b,c as h,d as C,e as S,f as v,g as x,h as y,i as O,j as P,k as _,l as M,m as w,n as E,o as H}from"./chunk-LJ3XI4RV.js";import{a as L}from"./chunk-5T2BYJ45.js";import{B as m,E as s,I as p,L as c,P as f,T as n,U as t,V as o,X as u,Z as i,q as d,va as g}from"./chunk-UDG4TZWI.js";function k(a,e){a&1&&(n(0,"p",27),i(1,"Saved."),t())}var N="mqtt-device-pilot.homeProfile",T=class a{fb=d(E);tempUnit=d(L);form;saved=!1;ngOnInit(){let e=this.loadFromStorage();this.form=this.fb.group({addressLine1:[e?.addressLine1??""],addressLine2:[e?.addressLine2??""],townOrCity:[e?.townOrCity??""],eircode:[e?.eircode??e?.postcode??""],location:[e?.location??""],defaultHeatingSetpoint:[e?.defaultHeatingSetpoint??null],preferredTempUnit:[e?.preferredTempUnit??"C"]})}loadFromStorage(){try{let e=localStorage.getItem(N);return e?JSON.parse(e):null}catch{return null}}save(){let e=this.form.getRawValue(),r={addressLine1:e.addressLine1||void 0,addressLine2:e.addressLine2||void 0,townOrCity:e.townOrCity||void 0,eircode:e.eircode||void 0,location:e.location||void 0,defaultHeatingSetpoint:e.defaultHeatingSetpoint!=null&&e.defaultHeatingSetpoint!==""?Number(e.defaultHeatingSetpoint):void 0,preferredTempUnit:e.preferredTempUnit||"C"};localStorage.setItem(N,JSON.stringify(r)),this.tempUnit.refresh(),this.saved=!0,setTimeout(()=>this.saved=!1,2e3)}static \u0275fac=function(r){return new(r||a)};static \u0275cmp=s({type:a,selectors:[["app-home-profile"]],decls:45,vars:2,consts:[[1,"home-profile-page"],[1,"page-title"],[1,"page-intro"],[1,"profile-form",3,"ngSubmit","formGroup"],["aria-labelledby","address-heading",1,"form-section"],["id","address-heading",1,"section-heading"],["for","addressLine1",1,"label"],["id","addressLine1","type","text","formControlName","addressLine1","placeholder","Street and number","autocomplete","address-line1",1,"input"],["for","addressLine2",1,"label"],["id","addressLine2","type","text","formControlName","addressLine2","placeholder","Flat, building, etc. (optional)","autocomplete","address-line2",1,"input"],["for","townOrCity",1,"label"],["id","townOrCity","type","text","formControlName","townOrCity","placeholder","Town or city","autocomplete","address-level2",1,"input"],["for","eircode",1,"label"],["id","eircode","type","text","formControlName","eircode","placeholder","Eircode","autocomplete","postal-code",1,"input"],["aria-labelledby","location-heading",1,"form-section"],["id","location-heading",1,"section-heading"],["for","location",1,"label"],["id","location","type","text","formControlName","location","placeholder","e.g. area name or description (optional)","autocomplete","off",1,"input"],["aria-labelledby","defaults-heading",1,"form-section"],["id","defaults-heading",1,"section-heading"],["for","defaultHeatingSetpoint",1,"label"],["id","defaultHeatingSetpoint","type","number","formControlName","defaultHeatingSetpoint","placeholder","e.g. 20","min","5","max","30","step","0.5",1,"input","input-narrow"],["for","preferredTempUnit",1,"label"],["id","preferredTempUnit","formControlName","preferredTempUnit",1,"input","select"],["value","C"],["value","F"],["type","submit",1,"btn","btn-primary"],[1,"save-hint"],["routerLink","/manage",1,"back-link"]],template:function(r,l){r&1&&(n(0,"div",0)(1,"h1",1),i(2,"Home profile"),t(),n(3,"p",2),i(4,"Manage your home\u2019s address, location and default settings. All fields are optional."),t(),n(5,"form",3),u("ngSubmit",function(){return l.save()}),n(6,"section",4)(7,"h2",5),i(8,"Address"),t(),n(9,"label",6),i(10,"Address line 1"),t(),o(11,"input",7),n(12,"label",8),i(13,"Address line 2"),t(),o(14,"input",9),n(15,"label",10),i(16,"Town or city"),t(),o(17,"input",11),n(18,"label",12),i(19,"Eircode"),t(),o(20,"input",13),t(),n(21,"section",14)(22,"h2",15),i(23,"Location"),t(),n(24,"label",16),i(25,"Location or area"),t(),o(26,"input",17),t(),n(27,"section",18)(28,"h2",19),i(29,"Default settings"),t(),n(30,"label",20),i(31,"Default heating setpoint (\xB0C)"),t(),o(32,"input",21),n(33,"label",22),i(34,"Preferred temperature unit"),t(),n(35,"select",23)(36,"option",24),i(37,"Celsius (\xB0C)"),t(),n(38,"option",25),i(39,"Fahrenheit (\xB0F)"),t()()(),n(40,"button",26),i(41,"Save"),t(),p(42,k,2,0,"p",27),t(),n(43,"a",28),i(44,"\u2190 Back to Manage"),t()()),r&2&&(m(5),c("formGroup",l.form),m(37),f(l.saved?42:-1))},dependencies:[g,H,S,P,_,b,v,O,h,C,w,M,x,y],styles:[".home-profile-page[_ngcontent-%COMP%]{padding:1.5rem 1.25rem 5rem;max-width:560px;margin:0 auto}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary);margin:0 0 .5rem}.page-intro[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 1.5rem;font-size:.95rem;line-height:1.5}.profile-form[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);padding:1.25rem 1.25rem 1.5rem;margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]:last-of-type{margin-bottom:0}.section-heading[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:600;color:var(--text-primary);margin:0 0 .75rem;line-height:1.35}.label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:500;color:var(--text-primary);margin-bottom:.25rem}.input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;margin-bottom:.75rem;border:1px solid var(--border);border-radius:10px;font-size:1rem;background:var(--bg-content);color:var(--text-primary);box-sizing:border-box}.input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.input-narrow[_ngcontent-%COMP%]{max-width:8rem}.select[_ngcontent-%COMP%]{appearance:auto;cursor:pointer}.btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:none;border-radius:10px;font-size:1rem;font-weight:600;cursor:pointer;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%]{background:var(--accent-blue);color:#fff;margin-top:1rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.save-hint[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin:.5rem 0 0}.back-link[_ngcontent-%COMP%]{display:inline-block;color:var(--accent-blue);text-decoration:none;font-size:.95rem}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{T as HomeProfileComponent};
