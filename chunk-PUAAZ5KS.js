import{a as D}from"./chunk-AASM5JO7.js";import"./chunk-LB3TK5W2.js";import{B as l,E as y,I as x,L as k,N as O,P as M,Q as w,R as v,S as f,T as t,U as o,V as C,W as b,X as s,Y as d,aa as i,ba as m,ca as P,pa as S,q as h,s as u,t as g,u as _,xa as A,ya as E}from"./chunk-NXQ7BON5.js";var T=(r,e)=>e.label;function I(r,e){if(r&1&&(t(0,"div",3),i(1),o()),r&2){let n=d();l(),m(n.deleteAccountError)}}function z(r,e){if(r&1){let n=b();t(0,"button",18),s("click",function(){let a=u(n).$implicit,p=d();return g(p.onSettingsOptionClick(a))}),t(1,"span",19),i(2),o(),t(3,"span",20),_(),t(4,"svg",21),C(5,"path",22),o()()()}if(r&2){let n=e.$implicit;l(2),m(n)}}function F(r,e){if(r&1){let n=b();t(0,"button",23),s("click",function(){let a=u(n).$implicit,p=d();return g(p.onAccountOptionClick(a))}),t(1,"span",24),i(2),o(),t(3,"span",25),_(),t(4,"svg",21),C(5,"path",22),o()()()}if(r&2){let n=e.$implicit;O("destructive",n.destructive),l(2),m(n.label)}}function L(r,e){if(r&1){let n=b();t(0,"button",26),s("click",function(){let a=u(n).$implicit,p=d();return g(p.onSupportOptionClick(a))}),t(1,"span",27),i(2),o(),t(3,"span",28),_(),t(4,"svg",21),C(5,"path",22),o()()()}if(r&2){let n=e.$implicit;l(2),m(n)}}function G(r,e){if(r&1){let n=b();t(0,"div",29),s("click",function(){u(n);let a=d();return g(a.closeDeleteConfirm())}),t(1,"div",30),s("click",function(a){return u(n),g(a.stopPropagation())}),t(2,"h2",31),i(3,"Delete account"),o(),t(4,"p",32),i(5),o(),t(6,"div",33)(7,"button",34),s("click",function(){u(n);let a=d();return g(a.closeDeleteConfirm())}),i(8," Cancel "),o(),t(9,"button",35),s("click",function(){u(n);let a=d();return g(a.confirmDeleteAccount())}),i(10),o()()()()}if(r&2){let n=d();l(5),m(n.deleteAccountConfirmMessage),l(2),k("disabled",n.deleteAccountLoading),l(2),k("disabled",n.deleteAccountLoading),l(),P(" ",n.deleteAccountLoading?"Deleting\u2026":"Delete account"," ")}}var V=class r{router=h(A);auth=h(D);deleteAccountError="";deleteAccountLoading=!1;showDeleteConfirm=!1;deleteAccountConfirmMessage="Are you sure you want to delete your account? This will permanently remove your account and all your saved settings and device data. You will be logged out and will need to register again to use the app. This cannot be undone.";settingsOptions=["My devices","Groups","Actions","Connect to Alexa, Apple or Google","Home profile","People and permissions","Energy tariffs"];accountOptions=[{label:"Personal Details",destructive:!1},{label:"Orders & Returns",destructive:!1},{label:"Account Security",destructive:!1},{label:"Delete account",destructive:!0}];supportOptions=["Ask AI","FAQ","Product Guides"];onSettingsOptionClick(e){if(e==="My devices"){this.router.navigate(["/my-devices"]);return}if(e==="Groups"){this.router.navigate(["/groups"]);return}if(e==="Actions"){this.router.navigate(["/actions"]);return}if(e==="Connect to Alexa, Apple or Google"){this.router.navigate(["/connect-to-alexa"]);return}if(e==="Home profile"){this.router.navigate(["/home-profile"]);return}if(e==="People and permissions"){this.router.navigate(["/people-and-permissions"]);return}if(e==="Energy tariffs"){this.router.navigate(["/energy-tariffs"]);return}console.log("Settings option clicked:",e)}onAddDevice(){console.log("Add device clicked")}onAccountOptionClick(e){if(e.label==="Personal Details"){this.router.navigate(["/personal-details"]);return}if(e.label==="Orders & Returns"){this.router.navigate(["/orders-returns"]);return}if(e.label==="Account Security"){this.router.navigate(["/account-security"]);return}if(e.label==="Delete account"){this.deleteAccountError="",this.showDeleteConfirm=!0;return}console.log("Account option clicked:",e.label)}closeDeleteConfirm(){this.deleteAccountLoading||(this.showDeleteConfirm=!1)}confirmDeleteAccount(){this.deleteAccountLoading=!0,this.auth.deleteAccount().subscribe({next:()=>this.auth.logout(),error:e=>{this.deleteAccountLoading=!1,this.showDeleteConfirm=!1,this.deleteAccountError=e.error?.error??e.message??"Failed to delete account. Please try again."}})}onSupportOptionClick(e){if(e==="Ask AI"){this.router.navigate(["/ask-ai"]);return}if(e==="FAQ"){this.router.navigate(["/faq"]);return}if(e==="Product Guides"){this.router.navigate(["/product-guides"]);return}console.log("Support option clicked:",e)}onLogout(){this.auth.logout()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=y({type:r,selectors:[["app-manage"]],decls:29,vars:2,consts:[[1,"manage-page"],[1,"page-title"],[1,"page-intro"],["role","alert",1,"error-banner"],[1,"settings-section"],[1,"settings-card"],["type","button",1,"settings-row"],["type","button",1,"btn-add-device",3,"click"],[1,"account-section"],[1,"section-title"],[1,"account-card"],["type","button",1,"account-row",3,"destructive"],[1,"support-section"],[1,"support-card"],["type","button",1,"support-row"],["type","button",1,"logout-btn",3,"click"],["routerLink","/home",1,"back-link"],["role","dialog","aria-modal","true","aria-labelledby","delete-account-title",1,"modal-overlay"],["type","button",1,"settings-row",3,"click"],[1,"settings-label"],["aria-hidden","true",1,"settings-chevron"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 18l6-6-6-6"],["type","button",1,"account-row",3,"click"],[1,"account-label"],["aria-hidden","true",1,"account-chevron"],["type","button",1,"support-row",3,"click"],[1,"support-label"],["aria-hidden","true",1,"support-chevron"],["role","dialog","aria-modal","true","aria-labelledby","delete-account-title",1,"modal-overlay",3,"click"],[1,"modal-dialog",3,"click"],["id","delete-account-title",1,"modal-title"],[1,"modal-message"],[1,"modal-actions"],["type","button",1,"modal-btn","modal-btn-cancel",3,"click","disabled"],["type","button",1,"modal-btn","modal-btn-delete",3,"click","disabled"]],template:function(n,c){n&1&&(t(0,"div",0)(1,"h1",1),i(2,"Manage"),o(),t(3,"p",2),i(4,"Settings and account."),o(),x(5,I,2,1,"div",3),t(6,"section",4)(7,"div",5),v(8,z,6,1,"button",6,w),t(10,"button",7),s("click",function(){return c.onAddDevice()}),i(11," + Add a device "),o()()(),t(12,"section",8)(13,"h2",9),i(14,"Account"),o(),t(15,"div",10),v(16,F,6,3,"button",11,T),o()(),t(18,"section",12)(19,"h2",9),i(20,"Support"),o(),t(21,"div",13),v(22,L,6,1,"button",14,w),o()(),t(24,"button",15),s("click",function(){return c.onLogout()}),i(25,"Log out"),o(),t(26,"a",16),i(27,"\u2190 Back to Home"),o()(),x(28,G,11,4,"div",17)),n&2&&(l(5),M(c.deleteAccountError?5:-1),l(3),f(c.settingsOptions),l(8),f(c.accountOptions),l(6),f(c.supportOptions),l(6),M(c.showDeleteConfirm?28:-1))},dependencies:[S,E],styles:[".manage-page[_ngcontent-%COMP%]{padding:1.5rem 1.25rem 5rem;max-width:480px;margin:0 auto}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary);margin:0 0 .5rem}.page-intro[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 1.5rem;font-size:.95rem}.error-banner[_ngcontent-%COMP%]{background:var(--error-bg);color:var(--error-red);padding:.75rem 1rem;border-radius:12px;margin-bottom:1rem;font-size:.9rem}.section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0 0 .75rem}.settings-section[_ngcontent-%COMP%]{margin-bottom:2rem}.settings-card[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);overflow:hidden}.settings-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:1rem 1.25rem;border:none;border-bottom:1px solid var(--border);background:transparent;color:var(--text-primary);font-size:1rem;text-align:left;cursor:pointer;transition:background .2s}.settings-row[_ngcontent-%COMP%]:hover{background:var(--bg-content)}.settings-row[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.settings-label[_ngcontent-%COMP%]{font-weight:500}.settings-chevron[_ngcontent-%COMP%]{display:flex;color:var(--text-secondary)}.settings-chevron[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn-add-device[_ngcontent-%COMP%]{display:block;width:100%;padding:1.25rem 1.5rem;margin:0;border:none;border-top:1px solid var(--border);background:var(--bg-card);color:var(--accent-blue);font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s,color .2s}.btn-add-device[_ngcontent-%COMP%]:hover{background:var(--accent-blue-soft)}.account-section[_ngcontent-%COMP%]{margin-bottom:2rem}.account-card[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);overflow:hidden}.account-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:1rem 1.25rem;border:none;border-bottom:1px solid var(--border);background:transparent;color:var(--text-primary);font-size:1rem;text-align:left;cursor:pointer;transition:background .2s}.account-row[_ngcontent-%COMP%]:hover{background:var(--bg-content)}.account-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.account-row.destructive[_ngcontent-%COMP%]   .account-label[_ngcontent-%COMP%]{color:var(--error-red)}.account-row.destructive[_ngcontent-%COMP%]:hover{background:var(--error-bg)}.account-label[_ngcontent-%COMP%]{font-weight:500}.account-chevron[_ngcontent-%COMP%]{display:flex;color:var(--text-secondary)}.account-row.destructive[_ngcontent-%COMP%]   .account-chevron[_ngcontent-%COMP%]{color:var(--error-red)}.account-chevron[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.logout-btn[_ngcontent-%COMP%]{display:block;width:100%;margin-top:1rem;padding:.875rem 1rem;border:none;border-radius:12px;background:#dc2626;color:#fff;font-size:1rem;font-weight:500;cursor:pointer;transition:background .2s ease}.logout-btn[_ngcontent-%COMP%]:hover{background:#b91c1c}.support-section[_ngcontent-%COMP%]{margin-bottom:2rem}.support-card[_ngcontent-%COMP%]{background:var(--bg-card);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);overflow:hidden}.support-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:1rem 1.25rem;border:none;border-bottom:1px solid var(--border);background:transparent;color:var(--text-primary);font-size:1rem;text-align:left;cursor:pointer;transition:background .2s}.support-row[_ngcontent-%COMP%]:hover{background:var(--bg-content)}.support-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.support-label[_ngcontent-%COMP%]{font-weight:500}.support-chevron[_ngcontent-%COMP%]{display:flex;color:var(--text-secondary)}.support-chevron[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.back-link[_ngcontent-%COMP%]{display:inline-block;color:var(--accent-blue);text-decoration:none;font-size:.95rem;margin-top:.5rem}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1.25rem;animation:_ngcontent-%COMP%_modalFadeIn .2s ease}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0}to{opacity:1}}.modal-dialog[_ngcontent-%COMP%]{background:var(--bg-card);color:var(--text-primary);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow),0 20px 40px #00000026;padding:1.5rem 1.25rem;max-width:400px;width:100%;animation:_ngcontent-%COMP%_modalSlideIn .25s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.96) translateY(-8px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0 0 .75rem;color:var(--text-primary)}.modal-message[_ngcontent-%COMP%]{font-size:.95rem;color:var(--text-secondary);line-height:1.5;margin:0 0 1.5rem}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end}.modal-btn[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border-radius:12px;font-size:.95rem;font-weight:500;cursor:pointer;transition:background .2s ease,opacity .2s ease;border:none}.modal-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.modal-btn-cancel[_ngcontent-%COMP%]{background:var(--bg-content);color:var(--text-primary);border:1px solid var(--border)}.modal-btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--border)}.modal-btn-delete[_ngcontent-%COMP%]{background:var(--error-red);color:#fff}.modal-btn-delete[_ngcontent-%COMP%]:hover:not(:disabled){background:#b91c1c;filter:brightness(1.05)}"]})};export{V as ManageComponent};
